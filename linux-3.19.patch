--- lin_tape-2.9.4/lin_tape_scsi_config.c~	2015-03-30 20:27:22.000000000 +0200
+++ lin_tape-2.9.4/lin_tape_scsi_config.c	2015-03-30 20:30:52.012073469 +0200
@@ -6863,9 +6863,13 @@
 {
 	int rc = -EIO;
 	int minor = -1;
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(3,19,0)
+	struct inode* inode = filp->f_path.dentry->d_inode;
+#else
 #if LINUX_VERSION_CODE >= KERNEL_VERSION(2,6,36)
 	struct inode* inode = filp->f_dentry->d_inode;
 #endif
+#endif
 
 	minor = iminor(inode);
 
@@ -7129,7 +7133,11 @@
 	int dev_index = 0;
 	boolean des_locked = False, drv_locked = False;
 
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(3,19,0)
+	minor = iminor(file->f_path.dentry->d_inode);
+#else
 	minor = iminor(file->f_dentry->d_inode);
+#endif
 	DbgPrint(("lin_tape_read entry: minor %d\n", minor));
 
 	if(minor >= LinTapeChangerOffset) {
@@ -7236,7 +7244,11 @@
 	int dev_index = 0;
 	boolean des_locked = False, drv_locked = False;
 
+#if LINUX_VERSION_CODE >= KERNEL_VERSION(3,19,0)
+	minor = iminor(file->f_path.dentry->d_inode);
+#else
 	minor = iminor(file->f_dentry->d_inode);
+#endif
 	DbgPrint(("lin_tape_write entry: minor %d\n", minor));
 
 	if(minor >= LinTapeChangerOffset) {
--- lin_tape-2.9.4/lin_tape_scsi_config.h~	2014-10-30 15:22:07.000000000 +0100
+++ lin_tape-2.9.4/lin_tape_scsi_config.h	2015-03-30 20:32:58.852078773 +0200
@@ -304,7 +304,9 @@
 static int lin_tape_probe(struct device *dev);
 static int lin_tape_remove(struct device *dev);
 static struct scsi_driver lin_tape_driver = {
+#if LINUX_VERSION_CODE < KERNEL_VERSION(3,19,0)
 	.owner = THIS_MODULE,
+#endif
 	.gendrv = {
 		   .name = "lin_tape",
 		   .probe = lin_tape_probe,
